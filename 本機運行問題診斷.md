# 本機運行問題診斷指南

## 常見問題及解決方法

### 問題 1：Python 未安裝或未配置

**症狀**：
- 運行 `python app.py` 時提示 "python 不是內部或外部命令"
- 運行 `pip` 時提示找不到命令

**解決方法**：
1. 檢查 Python 是否已安裝：
   - 打開命令提示字元（CMD）或 PowerShell
   - 輸入 `python --version` 或 `py --version`
   - 如果沒有顯示版本號，需要安裝 Python

2. 安裝 Python：
   - 下載：https://www.python.org/downloads/
   - 安裝時**務必勾選** "Add Python to PATH"
   - 安裝完成後重新打開終端機

### 問題 2：依賴套件未安裝

**症狀**：
- 運行時出現 `ModuleNotFoundError`
- 例如：`No module named 'flask'` 或 `No module named 'whisper'`

**解決方法**：
```bash
# 安裝所有依賴
pip install -r requirements.txt

# 或使用
python -m pip install -r requirements.txt
```

**注意**：首次安裝 Whisper 相關套件可能需要較長時間（特別是 torch）

### 問題 3：Whisper 模型載入時間過長

**症狀**：
- 應用啟動時卡在 "正在載入 Whisper 模型..."
- 首次運行需要下載模型（約 150MB）

**解決方法**：
1. 耐心等待首次下載（可能需要 5-10 分鐘）
2. 確保網路連接正常
3. 如果下載失敗，檢查防火牆設置

### 問題 4：FFmpeg 未安裝

**症狀**：
- 運行時出現 `ffmpeg` 相關錯誤
- 音頻處理失敗

**解決方法**：
1. **Windows**：
   - 下載 FFmpeg：https://ffmpeg.org/download.html
   - 或使用 Chocolatey：`choco install ffmpeg`
   - 或使用 conda：`conda install ffmpeg`

2. 將 FFmpeg 添加到系統 PATH

### 問題 5：端口被占用

**症狀**：
- 運行時提示 "Address already in use"
- 無法訪問 http://localhost:5000

**解決方法**：
1. 檢查端口是否被占用：
   ```bash
   netstat -ano | findstr :5000
   ```
2. 更改端口（修改 app.py）：
   ```python
   app.run(debug=True, port=5001)
   ```

### 問題 6：應用啟動但無法訪問

**症狀**：
- 應用顯示運行中，但瀏覽器無法打開

**解決方法**：
1. 確認訪問的網址是：`http://localhost:5000` 或 `http://127.0.0.1:5000`
2. 檢查防火牆是否阻止了連接
3. 確認應用確實正在運行（查看終端輸出）

## 快速診斷步驟

### 步驟 1：檢查 Python
```bash
python --version
# 或
py --version
```

### 步驟 2：檢查依賴
```bash
pip list
# 確認是否有 Flask, openai-whisper, torch 等
```

### 步驟 3：嘗試運行
```bash
python app.py
```

### 步驟 4：查看錯誤訊息
- 複製完整的錯誤訊息
- 根據錯誤訊息查找解決方法

## 推薦的運行方式

### 方法 1：直接運行（開發模式）
```bash
python app.py
```
然後在瀏覽器打開：http://localhost:5000

### 方法 2：使用虛擬環境（推薦）
```bash
# 創建虛擬環境
python -m venv venv

# 激活虛擬環境（Windows）
venv\Scripts\activate

# 安裝依賴
pip install -r requirements.txt

# 運行
python app.py
```

## 常見錯誤訊息及解決方法

### 錯誤 1：`ModuleNotFoundError: No module named 'flask'`
**解決**：`pip install flask`

### 錯誤 2：`RuntimeError: ffmpeg not found`
**解決**：安裝 FFmpeg（見問題 4）

### 錯誤 3：`OSError: [WinError 10048] 地址已在使用`
**解決**：更改端口或關閉占用端口的程序

### 錯誤 4：`torch.cuda.is_available() returns False`
**說明**：這是正常的，表示沒有 GPU，會使用 CPU 運行（較慢但可用）

## 如果仍然無法解決

1. 檢查終端機的完整錯誤訊息
2. 確認所有依賴都已正確安裝
3. 嘗試在虛擬環境中運行
4. 檢查 Python 版本（建議 3.8 或更高）





